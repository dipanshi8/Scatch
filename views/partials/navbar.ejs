<nav class="w-full flex justify-between items-center px-5 py-3 bg-white shadow-md sticky top-0 z-50">
    <a href="/" class="text-xl font-bold text-blue-600 hover:text-blue-800 transition">Scatch</a>
    
    <% 
    // Check if user is logged in via cookie/session
    var isUserLoggedIn = typeof user !== 'undefined' && user !== null;
    var isAdminLoggedIn = typeof admin !== 'undefined' && admin !== null;
    
    // Get cart count from res.locals (calculated in app.js middleware)
    // cartCount is set in app.js middleware for all requests
    var cartItemCount = typeof cartCount !== 'undefined' ? cartCount : 0;
    %>
    
    <div class="flex gap-5 items-center">
        <% if (isUserLoggedIn) { %>
            <!-- Logged in user navigation -->
            <a href="/shop" class="hover:text-blue-600 transition font-medium">Shop</a>
            <a href="/cart" class="hover:text-blue-600 transition flex items-center gap-2 relative px-2">
                <i class="ri-shopping-cart-line text-xl"></i>
                <span>Cart</span>
                <% if (cartItemCount > 0) { %>
                    <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
                        <%= cartItemCount %>
                    </span>
                <% } %>
            </a>
            <a href="/orders" class="hover:text-blue-600 transition font-medium">My Orders</a>
            <a href="/users/logout" class="text-red-600 hover:text-red-800 transition font-medium">Logout</a>
        <% } else if (isAdminLoggedIn) { %>
            <!-- Admin navigation -->
            <a href="/owners/admin" class="hover:text-blue-600 transition font-medium">Dashboard</a>
            <a href="/owners/admin/products" class="hover:text-blue-600 transition font-medium">Products</a>
            <a href="/owners/admin/orders" class="hover:text-blue-600 transition font-medium">Orders</a>
            <a href="/owners/logout" class="text-red-600 hover:text-red-800 transition font-medium">Logout</a>
        <% } else { %>
            <!-- Guest navigation -->
            <a href="/shop" class="hover:text-blue-600 transition font-medium">Shop</a>
            <a href="/" class="hover:text-blue-600 transition font-medium">Login / Register</a>
        <% } %>
    </div>
</nav>

